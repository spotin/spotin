{% extends "layout.njk" %}

{% block body %}
<h1><i class="fas fa-sign-in-alt"></i> Log in</h1>
<form id="login-form" novalidate>
    <label for="username">Username</label>
    <input type="username" name="username" id="username" placeholder="Username">
    <label for="password">Password</label>
    <input type="password" name="password" id="password" placeholder="Password">
    <button type="submit"><i class="fas fa-sign-in-alt"></i> Log in</button>
</form>
<script>
    const form = document.querySelector("form");

    form.addEventListener("submit", async (event) => {
        event.preventDefault();

        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        const response = await fetch('/api/auth/login', {
            method: 'POST',
            mode: "cors",
            cache: "no-cache", // *default, no-cache, reload, force-cache, only-if-cached
            credentials: "same-origin", // include, *same-origin, omit
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                username,
                password,
            }),
        });

        console.log(response);
    });
</script>
{% endblock %}
